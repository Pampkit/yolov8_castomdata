# API для обнаружения всплывающих окон на скриншотах
## Обзор
Этот проект направлен на разработку API для обнаружения всплывающих окон на скриншотах. API принимает на вход изображение в формате base64 и использует модель YOLOv8 на основе PyTorch для обнаружения всплывающих окон. Flask используется для построения API, а также интегрирован Swagger UI с использованием Flasgger для удобной документации и тестирования API.
## Обучние модели
Для обучения модели использовались данные, созданные в процессе разметки скриншотов с устройства iPhone. Решено было остановиться на трех классах: site, system, button, что было обусловлено ограниченным объемом обучающих данных. Для обучения использовалась архитектура YOLOv8 PyTorch, а модель сохранена в файле bestv2.pt.

## Структура проекта
### Файлы
- app.py: Основной файл, который следует запускать для запуска API. Он обрабатывает входящие запросы, обрабатывает входные изображения и возвращает результаты обнаружения.

- create_json.py: Содержит функцию, ответственную за генерацию ответа в формате JSON. Этот файл играет ключевую роль в формировании выходных данных API.

- TestApi.py: Файл предназначен для тестирования API с использованием четырех тестовых скриншотов. Он гарантирует правильную работу API и обеспечивает простой способ проверки возможностей обнаружения всплывающих окон.

- bestv2.pt: Файл модели YOLOv8 PyTorch, предназначенной для обнаружения всплывающих окон.

- post.yaml: Файл с описанием параметров для Swagger UI.

- yolov8.ipynb: Ноутбук, в котором происходило обучение модели YOLOv8 PyTorch.

- test_images: Папка с тестовыми изображениями для проверки работы API.

### Зависимости
- Flask: Легковесный веб-фреймворк, используемый для построения API.
- YOLOv8 PyTorch: Предварительно обученная модель для обнаружения всплывающих окон.
- Flasgger: Библиотека для интеграции Swagger UI в Flask-приложение.

## Начало работы
Для настройки и запуска API выполните следующие шаги:

Клонируйте репозиторий:
```bash
git clone <repository_url>
cd <repository_directory>
```

Установите зависимости:
```bash
pip install -r requirements.txt
```

Запустите API:
```bash
python app.py
```

Теперь API и Swagger UI должны быть доступны по адресу http://localhost:5000.

## Конечные точки API
### 1. Конечная точка обнаружения:
- Конечная точка: /main
- Метод: POST
- Входные данные: JSON {"screenshot": "<изображение в формате base46>"}
- Выходные данные: JSON-ответ с результатами обнаружения всплывающих окон.
  
## Тестирование
Для проверки функциональности API с использованием предоставленного тестового скрипта:
```bash
python TestApi.py
```
Это протестирует API с использованием четырех тестовых скриншотов и отобразит результаты обнаружения.

Документацию Swagger можно просмотреть по адресу http://localhost:5000/apidocs.
